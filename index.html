<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	*{margin: 0;padding: 0;}
	#div1{width: 200px;height: 200px;background-color: red;position: absolute;}
	#div2{width: 300px;height: 300px;background-color: green;position: absolute;}
	</style>
</head>
<body>
	<div id="div1"></div>
	<div id="div2"></div>
	<script type="text/javascript">
	window.onload=function(){
		new Drag("div1");
		new Drag("div2");
	}
		

		function Drag(id){
			this.switchA = false;
			this.disX = 0;
			this.disY = 0;
			this.oDiv = document.getElementById(id);
			var _this = this;
			this.oDiv.onmousedown=function(){
				_this.fndown();
			};
			document.onmousemove=function(){
				_this.fnmove();
			};
			document.onmouseup=function(){
				_this.fnup();
			};
		}
		Drag.prototype.fndown=function(ev){
				var oEvent = ev || event;
				this.disX = oEvent.clientX - this.oDiv.offsetLeft;
				this.disY = oEvent.clientY - this.oDiv.offsetTop;
				this.switchA = true;

		}

		Drag.prototype.fnmove=function(ev){
			if(this.switchA){
				var oEvent = ev || event;
				var l = oEvent.clientX-this.disX;
				var t = oEvent.clientY-this.disY;
				if(l<0){
					l=0;
				}
				else if(l>document.documentElement.clientWidth - this.oDiv.offsetWidth){
					l = document.documentElement.clientWidth - this.oDiv.offsetWidth
				}
				if(t<0){
					t=0;
				}
				else if(t>document.documentElement.clientHeight - this.oDiv.offsetHeight){
					t=document.documentElement.clientHeight - this.oDiv.offsetHeight
				}
				this.oDiv.style.left = l  +"px";
				this.oDiv.style.top = t  +"px";
				}
		}
		Drag.prototype.fnup=function(){
			// document.onmousemove = null;
			// document.onmouseup = null;
			this.switchA = false;
		}
	</script>
</body>
</html>
